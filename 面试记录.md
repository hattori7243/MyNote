面试官好，我叫张舒昱，目前就读于哈尔滨工业大学深圳，本科毕业于华中科技大学。这次我应聘的岗位是软件工程师，后台开发方向。

研究生阶段的研究方向是模型压缩，研究内容是对神经网络模型进行压缩，其中用到了增量压缩的思想和量化技术，目前研究成果已经写成论文正在投稿中。

我平时主力语言是java，在科研时间之余，纯粹兴趣，仿照dubbo，我做了一个RPC框架的项目，做这个项目的原因是目前分布式微服务技术还挺热的，去了解这些的时候发现，其中很多都需要用到rpc框架来进行通信和远程调用。因此，想充分了解原理，就做了现在这个项目。项目使用到的有 netty是用来完成网络传输部分、zookeeper是作为注册中心来暴露和获取服务、kryo是用来替代性能更不好的jdk自带的序列化。其中还用到了动态代理，用了两种，cglib和jdk自带的动态代理。

非常感谢贵公司给我的这次面试机会，希望能有机会加入xxx。

# 腾讯

## 一面

- 手撕：15分钟写两题
  - 最大子数组连续和
  - 优先级括号匹配：`{}[]()`优先级依次递减，优先级大的不能嵌套在优先级小的里面。例如{()}是合法的，({})是不合法的
- 讲一下Collection（List、Set、Map）
- 讲一下HashMap的实现原理
- 解决hash冲突都有什么方法？开地址法哪里有用到过能举个例子吗？
- java里面的锁都有哪些？怎么实现的？
- 线程池的参数
- tcp和udp的区别
- tcp的拥塞控制
- tcp的报文头都有哪些字段
- tcp的三次握手
- 对没有在监听tcp连接的端口发送建立连接的请求，会收到怎么样的回复报文
- mysql的索引
  - 为什么用B+树？
  - 聚簇索引和非聚簇索引的区别
- mysql的事务隔离级别
- linux命令
- 平时是怎么学习的？
- 了解坑
- 了解k8s、docker吗？简单说一下你对他们的理解
- 介绍部门，小程序云开发相关

## hr面

- 工作地点？
- 考研还是保研的？成绩怎么样？
- 有实习吗？有时间提前实习吗？
- 你们导师对你的科研工作满意吗？
- 你对我们部门有什么了解？简单说一下
- 个人怎么管理情绪？
- 拿了哪家公司的offer？
- 为什么相比字节更想来腾讯？

# 拼多多提前批

## 一面

- 手撕：链表逆序表示的数，写加法
- 项目相关：
  - JDK自带的代理和cglib实现的动态代理有什么区别
  - 动态代理的步骤是什么？
  - 服务端接收到传过去的字节流的时候，怎么找到被调用的类并绑定动态代理？（反射）
  - 反射得到对象怎么得到方法？怎么取得field的值？如果是私有化的可以绕过去吗？
  - 你服务端创建对象是单例的吗？那每次调用服务都需要通过反射得到一个类吗？你知道反射的速度吗？
  - 你rpc传的包是什么样的？怎么设置传输协议？
  - netty主要组件说一下
  - zookeeper集群中，各个节点都有哪些角色？选举流程是怎么样的？
  - 如果一个节点挂了，重新上线以后要怎么同步？那如果在同步过程中这个节点又收到请求怎么办？同步过程中的变化怎么传？
- 说一下java里面的容器，展开来说（Collection、List、Set、Map展开来）
- 如果需要并发，可以怎么做？
  - 使用并发容器
  - 使用synch
  - 使用AQS的锁
  - 。。。
- 写一下单例模式，要求支持并发（懒汉、饿汉）
- 智力问答：一个大圆作为棋盘，A和B轮流落子。落子规则就是落子区域没有其他棋子就可以，不重叠就可以。如果某人落子的时候没有可以落子的区域就输了。如果你是A参加这个游戏，你会采取什么策略？

## 二面

- ArrayList和LinkedList的区别
- 如果要自己实现一个栈的话，你会用哪个？
- TreeMap和HashMap的区别
- 如果我们使用一个自定义的类来作为Map的key，需要重写那些方法？（equal hashcode）不重写可能会出现什么问题
- override和overload的区别。
  - overload方法签名都包括哪些，包括返回值吗？（java语言层面不包括，jvm虚拟机层面是包括的）
- 线程池的核心参数（核心线程数、最大线程数、线程工厂、拒绝策略、队列种类）？展开来问了很久
- ThreadLocal？怎么实现的？
- java都有哪几种引用？怎么用？有什么用？
- mysql隔离级别，mysql是怎么解决幻读的？完全解决了吗？
- 主键索引、聚簇索引、辅助索引、二级索引、联合索引、覆盖索引、索引下推都是什么？
- 手撕：
  - 给你一个数组表示的完全二叉树，要你判断他是不是二叉搜索树
  - 类似剑指offer29

# 字节提前批

## 一面

- 自我介绍
- RPC服务的注册和暴露使用过程
- 负载均衡都有什么策略？
- 讲一下常见的IO模型
- 有了解zookeeper选举的流程？paxos、raft、zab协议？
- zookeeper最少三个节点组成集群，那如果挂了一台会怎么样？如果挂的那一台又上线了又怎么样？
- 序列化协议都有哪些？json可以用来序列化吗？好处坏处
- 说一下List、ArrayList、LinkedList
- 线程池都有哪些组件？线程池的核心线程数和最大线程数的区别？什么情况要用线程池，有什么好处？
- Mysql都有哪些索引？
- 简单举一些会让索引失效的情况
- 事务的四大特性、隔离级别，各个隔离级别都解决了什么问题
- 有没有办法不采用锁的方式来实现，最后也能达到一致性？（不知道他想问什么，不会）
- 乐观锁和悲观锁
- 设计模式的工厂模式了解吗？工厂模式下都有哪些模式？
- 责任链模式说一下，好处是什么
- 你都用过到哪些二叉树？说一下平衡二叉树
- 说一下堆排序
- 手撕：给一个数组，求组合加起来能得到目标的组合。每个数只能用一次。例如2 2 3 4 7，目标值是7。那么就有2 2 3、3 4、7三种。

## 二面

- 垃圾回收策略，分别有什么优缺点
- 怎么解决跨代引用的问题？
- CMS和G1垃圾回收器说一下，有什么优缺点。适用什么场景
- volatile说一下？大量使用volatile有什么问题？
- java中锁有哪些？AQS了解吗？AQS内部是怎么实现的？怎么用AQS实现读写锁，可重入锁。问的很细，说一两种不够，一直问你还有吗？
- jvm内存区域，为什么要这么划分？
- B树和B+树的区别？哪些地方用到了这些结构？
- 为什么mysql用B+树不用B树？
- 进程间通信方式，哪种最快，为什么
- 零拷贝是什么？怎么实现的？有什么缺点？
- 事务隔离级别有哪些？分别解决了什么问题？怎么解决的？
- 文件系统了解吗？他是怎么找到文件的？open函数返回的是什么？返回的东西本质是什么？
- 手撕：不让用ide
  - 链表快速排序。
  - 给定字符串，要求最多包括k个不重复元素的子字符串最大长度。

## 三面

- 研究生课题（讲了很久，15分钟左右。不知道为啥项目不聊，一直问我研究生课题）
- HashMap
- 红黑树怎么保证树高的？
- ConcurrentHashMap
- CAS操作
- 算法题
  - 给定int数组，求最大和的连续子数组。（回答的太快，估计觉得我做过，就没让写）
  - 2000万个考生，要求按高考分数排序。（2000万个，考生id+分数，两个int，大概1GB，所以直接内排序。）
    - 桶排，O（n）。
    - 如果内存放不下，怎么排？外部排序，例如归并
  - 给定字符串s，字典dict[a,b,c,d]，看s中是否有子串恰好包含字典中的所有元素，不要求顺序。
- 讲一下你对redis的认识
- 讲一下redis的主从同步
- redis持久化都有哪些，怎么实现的

# 阿里

## 笔试

## 插入翻转

给一个数组a，长度为n。要求插入到数组b中，插入的方式是每次插到数组b的最前面，然后将数组b整体翻转。最后输出全部插完以后的数组b。

- 例如:a是[1,2,3,4]。
  - 第一次插入b是[1]，翻转还是[1]
  - 第二次插入是[2,1,]，翻转变成[1,2]
  - 第三次插入是[3,1,2]，翻转变成[2,1,3]
  - 第四次插入是[4,2,1,3]，翻转变成[3,1,2,4]
  - 最后打印3 1 2 4即可

## 合并石头

总共有n个石头，高度给定。

每次操作如下：

- 将高度大于等于k的所有石头的高度减去k（k是高度不为0的所有石头的高度最小值）。
- 将相邻的高度相同的石头只保留一个，比如3 3 3就合并成一个3，0 0就合并为0

初始状态也有可能有可以合并的，可以算作提前做一次第二步，不算操作次数。

需要输出

- 需要几次才能结束
- 每次操作后还剩多少个石头（高度为0的也算）

# 虾皮提前批

## 笔试

- 第一题和第三题送分，简单到我记不起来了
- 第二题：二维矩阵，每个点的值为正或者为负。人走到正的地方会加血，走到负的地方会扣血。血小于0就死了，求从起始点到终点，最低的初始生命是多少。

## 一面

- 自我介绍
- 讲一下IO模型都有哪些
- 讲一下IO多路复用
- 讲一下Java的NIO和AIO
- 什么是DNS？过程是怎么样的
- 了解半连接攻击吗？在半连接攻击中，哪些握手是必须的，哪些是可能出现的，哪些是一定不会出现的
  - 第一次一定出现，发起攻击的过程
  - 第二次可能出现，可以在服务器端进行过滤处理
  - 第三次一定不会出现
- 了解ddos攻击吗？
- 什么是拓扑排序？具体排序过程是怎么样的？
- Java中HashMap的数据结构
- TreeMap的底层数据结构
  - 红黑树
- 什么是红黑树？
- mysql的索引为什么用B+树不用B树或者红黑树
- 设计模式有了解吗？挑一个你熟悉的讲一下
  - 单例模式、工厂模式、代理模式、原型模式、策略模式、建造者模式、观察者模式。。。
  - 单例模式：单线程实现、多线程懒汉实现、多线程加锁实现
- JDK自带的动态代理和cglib动态代理的区别，怎么实现的
- redis的数据类型
- 有序集合的实现方式
- 在有序集合中插入一个新元素的时间复杂度？
  - 跳表，二分查找，log n
- 讲一下什么是反向代理
- 负载均衡的策略
- 什么是一致性哈希
- 说一下你项目中服务暴露和服务发现的过程
- 如果需要实现当新增服务的时候，客户端要得知的话怎么实现？
  - 发布/订阅模式，可以通过zookeeper的监视器实现
- 讲一下你研究生的课题
- 做课题用的是python，对python熟悉吗
  - 不熟悉，下一题
- 手撕：最长连续子序列的长度，限20分钟，要处理输入输出
  - 比如，100 4 200 1 3 2，子序列4 1 3 2在数值上是连续的，输出4
  - 做法：先排序，然后看是不是前一个的+1
- 你的职业规划？
- 你有什么想问的？
  - 校招不分部门，进去以后随机分配，具体后面问HR
  - 深圳做的业务也还是做国外的市场
  - 进去以后是必须要转go吗？也不是，有的还是用java，但go偏多

## 二面

- 自我介绍
- 什么是序列化？为什么需要序列化？
- 如果序列化的对象发生了变化，怎么和对方沟通？
- 为什么要用RPC？RPC解决了什么问题？
- 讲一下Redis单线程
- Redis为什么效率高
- IO过程中要用到几次系统调用？
- 有没有方法减少？（零拷贝技术）
- 说一下零拷贝技术
- Mysql的题目：联合索引（a，b），讲四个select语句都能怎么用到索引？
- Java虚拟机内存模型（堆、方法区、程序计数器、虚拟机栈、本地方法区）
- 手撕：给一个升序链表，要求删除其中所有重复的元素

# 蓝湖提前批

## 笔试

- 分糖果，leetcode 135。加上了如果相邻的分数相同，奖品数也要相同
- 最长有效括号长度，leetcode 32。

# 同花顺提前批

## 一面

- 数组和链表的区别
- 快速排序的过程
- HashMap的原理
  - 头插法和尾插法的区别？为什么变成尾插法？
- ConcurrentHashMap原理
- 如果让你来实现，如何实现一个有固定容量的队列
- RPC框架怎么处理异常？
  - 哪些是应该RPC处理的？哪些是应该给上层处理的？
- 手撕：两个有序数组合并 O(n)

# 华为提前批

## 笔试

- 分糖果，leetcode 135。不过题目变成了环形数组。
- 两个序列求差值相同的子序列的最长长度。比如1 3 7和 2 4 8，差值分别是2 4对应相等
- 二维矩阵最短路径问题。不过还加了一个限制条件，一个点`t=grid[i][j]`会在行动t步之后封锁。加一个判断条件即可。

## 一面

- socket.accept的作用？
  - 不就是建立连接吗？不对。哦不会 下一题
- java c++线程连接，说什么java只能管理自己建立的连接 c++可以管理别的线程建立的？弄了很久没弄清楚问的是啥意思 直接说不会
- 说一下IO多路复用
- 你RPC框架中，如果发生版本的更新，方法返回的对象和之前不一样了，那你序列化后二进制文件客户端是没法反序列化的，怎么解决这个问题？
  - 用版本号来控制更新的变化？抽象成父类，针对父类来进行？好像也没答到点上。不知道啥意思
- 你说是为了了解分布式才学RPC框架的，那你对分布式协议有了解吗？paxos？raft？zookeeper用的是什么分布式协议？
  - 不懂，gg，已经想挂电话了
- 介绍一下你研究生的课题吧，随便聊了几分钟。感谢面试官没有直接退出会议室。
- 介绍一下volatile吧？为什么有synchronized还需要volatile？
  - 学到了Intel的cpu不同寄存器之间的缓存是会自动更新的，因此在intel的cpu上很多时候不用volatile也不会出问题
- 给你一个三维数组，由0 1构成，怎么找到最大的实心的全部由1构成的立方体？
- 二维矩阵的广搜，简单
- 给你一亿个文件名字符串，然后要你实现模糊搜索，比如xxx.txt这样的，你会用什么数据结构？
  - 答：字典树
- 共享屏幕写算法题：二叉树的两个节点之间的距离。就是从一个节点到另一个节点的最短距离。
  - 先写一个非递归后序遍历的模版。
  - 然后在访问到节点的时候，里面的就是他的所有祖先，保存出来。
  - 最后对比两个节点的所有祖先，找到最近的公共祖先
  - 剩下的节点数就是两个的距离长

## 二面

- 自我介绍
- 你本科不是计算机的，都学过啥计算机的课？
- HashMap底层的数据结构
- ConcurrentHashMap的底层数据结构
- ConcurrentHashMap有读锁嘛？为什么没有？那是怎么实现的？
- 说一下红黑树和平衡二叉树
- 数组和链表的区别
- 有序数组和链表查找特定元素的时间复杂度？
- 什么是跳表？怎么实现？
- Java对象从创立到被垃圾回收都在哪些区域？
- 说一下确定哪些垃圾可以回收算法
- 说一下垃圾收集算法
- 垃圾收集器有了解吗？简单的说两个。
- Java8有哪些新特性？
- 说一下Mysql的索引，为什么要用B+树？
- 进程和线程的区别
- 进程间通信的方式
- linux你都有用过哪些命令行？
- 查看端口的命令是什么？查看网卡设置的命令是什么？怎么查看比如6060端口被那个进程占用了？
  - lsof命令查看端口
  - netstate查看tcp udp端口和进程相关情况
- http和https的区别。为什么要引入证书？什么是数字签名？
- 手撕：二维数组，正数是陆地，负数是水。八面被水环绕的陆地就是岛屿，求面积最大岛屿的高度。

# tp-link提前批

## 一面

- 自我介绍

- 介绍一下对神经网络模型进行压缩的项目

- rpc框架是自己感兴趣写的吗

- java内存区域（没答全）

程序计数器、Java堆、Java栈、方法区、本地方法区、直接内存

- gc算法都有哪些？（忘了）
- 垃圾收集器都有哪些？（忘了）
- 介绍一下快速排序的过程？时间复杂度 空间复杂度？最差情况下。
- tcp三次握手的过程，seq的变化
- 缺页中断是什么？
- 常见的换页算法

随机替换、先来先出、NRU算法最近未使用、LRU最近使用最少

- 进程的状态。

创建、终止、就绪、运行、阻塞

- 进程间常用的通信方式

管道、信号量、共享内存、（没答出来的）消息队列、套接字

- 解释一下管道的特点

- 两个无环的单向链表求交点
- 平常兴趣爱好
- 为什么做这个rpc框架的这个项目
- redis缓存雪崩是什么？怎么避免？

使用redis集群，设置不同的过期时间

## 二面

- 自我介绍
- 讲一下java的垃圾回收机制？

确定回收？引用计数和可达性分析

怎么回收？标记-清除，标记-复制，标记-整理

- 两道算法题
  - 给定数组，求三数之和等于t的组合，不能有重复
  - 环形数组打家劫舍
- 本科研究生成绩怎么样？
- 是考研的吗？
- 为什么来深圳？
- 什么时候毕业？
- 有什么要问我的？
  - 进来以后的工作方向？
  - 工作地点？确定选了哪里就是哪里

# vivo提前批

## 一面

- 三分钟自我介绍
- 你本科是电气的，为什么来计算机了？
- 学java学了多久？
- java web项目经历没有吗
- 为什么netty效率高？
- 介绍一下IO多路复用
- 介绍一下反应器模式
- **负载均衡有做吗？**

。。。

- 介绍一下一致性哈希

。。。

- 缓存雪崩？

缓存大面积同时失效

第一种可能是，过期时间统一

**第二种可能如果采用的是非一致性哈希，节点数量变化，就会导致哈希值大量变化，缓存大面积失效**

- 在RPC项目的时候有碰到什么难点？
- 详细介绍一下RPC远程调用的整个过程？
- RPC的这个项目有参照别人的实现吗？
- 这个项目有什么可以优化改进的地方？
- redis的集群模式
- redis的数据类型
- redis的分布式锁
- mysql中左连接和右连接的区别
- 有用过github，svn有了解吗？
- 为什么科研这个有这么大的提升？介绍一下
- 工作以后的方向？想往哪方面提升？
- 对工作地点有要求吗？
- 对前端有了解吗？
- 有什么想问我的？











